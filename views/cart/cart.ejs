<% layout('layouts/boilerplate') %>
<%- include('../partials/navbar') %>

<ul class="list-group">
    <% for(let item of user.cart){ %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <h3><%= item.name %></h3>
                <img src="<%= item.img %>" alt="<%= item.name %>">
                <p>Rs: <%= item.price %></p>
            </div>
            <button class="btn btn-danger" onclick="deleteItem('<%= item._id %>')">Delete</button>
        </li>
    <% } %>
</ul>

<script>
    async function deleteItem(itemId) {
        try {
            const response = await fetch(`/cart/delete/${itemId}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            if (response.ok) {
                location.reload();
            } else {
                console.error('Failed to delete item');
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }
</script>
